@using BaiTap_phan3.Models;
@model BaiTap_phan3.Models.NhanVien;

@{
    ViewData["Title"] = "Staff";
    ViewBag.message = "Staff-index";
}

@{
    <style>
        .error-holder {
            color: red;
            font-size: smaller;
        }
    </style>

    //loading...
    <div class="loading loader--hidden"></div>

    // Thanh tìm kiếm
    <div class="container-fluid d-flex align-items-center justify-content-center p-4" style="height: 100px;">
        <input class="form-control-sm" id="search-input" type="search" style="width: 60%; height: 100%; font-size: large">
        <button class="btn bg-warning mx-4" id="search-button" style="height: 90%">Tìm kiếm</button>
    </div>


    <div class="tool">
        <!--Nút pupup thêm nhân viên-->
        <button id="create-staff-btn" data-toggle="modal" data-target="#modal-edit-staff">
            Thêm nhân viên <i class="fa fa-plus-circle"></i>
        </button>
        <!--Nút tải xuống Excel-->
        <button class="" onclick="ExportToExcel()">Xuất thành file excel <i class="fa fa-download"></i></button>
        <!--Drop down lọc phòng ban-->
        <select asp-for="PhongBanId" id="phongban-filter" class="">
            <option name="PhongBanId" selected value=-1 style="font-style: italic;">--Tất cả--</option>
            @foreach (PhongBan phongBan in ViewBag.PhongBans)
            {
                <option name="PhongBanId" data-id="@phongBan.Id" value="@phongBan.Id">@phongBan.TenPhongBan </option>
            }
        </select>
    </div>

    <!--bảng thông tin nhân viên-->
    <table class="table table-hover staff-table shadow" style="font-weight: 500;">
        <thead style="background-color: rgb(74, 74, 206); color: white">
            <tr>
                <th>STT</th>
                <th>Họ và tên</th>
                <th>Ngày sinh</th>
                <th>SDT</th>
                <th>Chức vụ</th>
                <th>Phòng ban</th>
                <th>Thao tác</th>
            </tr>
        </thead>
        <tbody id="staff-container">
            @Html.Partial("_staffBodyTable", Model)
        </tbody>
    </table>

            // phan trang
    <div id="staff-pagination" class="list-group list-group-horizontal justify-content-center"></div>

    <!--modal them/sua nhan vien-->
    <div class="modal fade" id="modal-edit-staff" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header pb-0">
                    <h4 class="modal-header staff-form-header">Thêm/Sửa thông tin nhân viên</h4>
                    <p style="color: green; padding:14px; height:100%; font-weight:bold" class="modal-message"></p>
                    <button class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body partial-create container pb-0">
                    @Html.Partial("_createStaffModal")
                </div>
            </div>
        </div>
    </div>

    <!--modal-poppup xoa nhan vien-->
    <div data-staff-id="" class="modal fade" id="modal-remove-staff" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <!--header-->
                <div class="modal-header">
                    <h4 class="modal-title">Xác nhận xóa nhân viên</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>

                <!--body--->
                <div class="modal-body">Bạn muốn xóa thông tin của nhân viên này</div>

                <!--footer-->
                <div class="modal-footer">
                    <button class="btn btn-danger" data-dismiss="modal" id="submit-remove-staff">Xóa</button>
                    <button class="btn btn-secondary" data-dismiss="modal">Hủy</button>
                </div>
            </div>
        </div>
    </div>

    @* message *@
    <div class="warning-container">
        <div class="warning-popup">
            <div class="icon-container">
                <div class="icon">
                    <i class="fa fa-check"></i>
                    <i class="fa fa-ban"></i>
                </div>
            </div>
            <p class="action-discription">Thực hiện chức năng xóa không thành công</p>
            <p class="reason">Máy chủ hiện tại đang có trục trặc, vui lòng thử lại sau</p>
            <div class="button-container">
                <button>Dissmiss</button>
            </div>
        </div>
    </div>
}